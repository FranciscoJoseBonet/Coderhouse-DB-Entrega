<h1 style="margin-bottom: 30px;">Todos los Carritos</h1>

{{#if carts.length}}
	<ul id="cartList">
		{{#each carts}}
			<li>
				<section class="cart-card">
					<a href="/{{this._id}}" style="text-decoration: none; color: inherit;">
						<header class="cart-header">
							<div>
								<h2 class="cart-name">{{this.name}}</h2>
								<p class="cart-id">ID interno: {{this._id}}</p>
							</div>
							<span class="status-badge status-{{this.status}}">{{this.status}}</span>
						</header>

						<div class="cart-body">
							<p><strong>Usuario:</strong> {{this.user}}</p>

							{{#if this.products.length}}
								<ul class="product-list">
									{{#each this.products}}
										{{#if product}}
											<li class="product-item">
												<div class="product-info">
													<strong>{{this.product.title}}</strong>
													<span class="meta">ID:
														{{this.product._id}}
														| Código:
														{{this.product.code}}</span>
												</div>
												<div class="product-extra">
													<span class="price">${{this.product.price}}</span>
													<span class="qty">x{{this.quantity}}</span>
												</div>
											</li>
										{{/if}}
									{{/each}}
								</ul>
							{{else}}
								<p class="empty" style="margin-left:20px; margin-top:5px">Este carrito
									está vacío</p>
							{{/if}}
						</div>
					</a>
					<footer class="cart-footer">
						<button
							type="button"
							class="btn-secondary"
							onclick="vaciarCarrito('{{this._id}}')"
						>Vaciar</button>
						<button
							type="button"
							class="btn-danger"
							onclick="eliminarCarrito('{{this._id}}')"
						>Eliminar</button>
					</footer>
				</section>
			</li>
		{{/each}}
	</ul>
{{else}}
	<p>No hay carritos disponibles.</p>
{{/if}}

<div>
	<button id="createCart" class="createCartBtn" onclick="crearCarrito()">Crear nuevo
		carrito</button>
</div>

<link rel="stylesheet" href="/css/allCarts.css" />
<script src="/js/allCarts.js"></script>